import os
from cryptography.fernet import Fernet

dont_touch_extensions = ["hackerman.py",'secret_key.key',"savior.py"] #files to ignore
nonallowed_files = [] #files to encrypt/hide

#iterates through current directory
for file in os.listdir(): 
    if file in dont_touch_extensions: #checks if current file in loop is in files to ignore list True -> skips to next file
        continue

    if os.path.isfile(file): #checks if current file in loop is a actual file not a folder True -> adds file to list to encrypt
        nonallowed_files.append(file)

with open("secret_key.key","rb") as key:
    encryption_key = key.read()
    # print(encryption_key)


#iterates through list of files to encrypt 
for encrypted_file in nonallowed_files: 
    with open(encrypted_file,"rb") as file: #opens the current file in loop
        secret_content = file.read() #returns all content in current file in loop

        # encryption = Fernet(encryption_key) #initializes encryption using key argument
    decrypted_data = Fernet(encryption_key).decrypt(secret_content) #decrypts data in file
        # print(token)

    with open(encrypted_file,"wb") as file: #opens file in loop and replaces data with encrypted bytes
        file.write(decrypted_data)